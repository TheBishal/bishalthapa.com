<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Location Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            #map{
                width:100%;
                height: 70vh;
            }
        </style>
</head>
<body>
    
    <p  id="currentLat">Lat: </p>
    <p  id="currentLon">Lon: </p>

    <div id="map"></div>
  

  
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAe_P07tdprTTMZ_OB8lWkRyx6h-mLlCfk&callback">
    </script>

    <script>
    var curLat = document.getElementById('currentLat');
var curLon = document.getElementById('currentLon');

if (navigator.geolocation) {
    curLat.innerHTML = "browser  support";
    navigator.geolocation.getCurrentPosition(showLoc);
} else {
    curLat.innerHTML = "browser doesnot not support";
}
var myLatLng;
var map = document.getElementById('map');
function showLoc(position) {
    console.log("updating coords ");
    console.log(position);
     myLatLng = { lat: position.coords.latitude, lng: position.coords.longitude };

     initMap();

    curLat.innerHTML = position.coords.latitude;
    curLon.innerHTML = position.coords.longitude;
}

navigator.geolocation.watchPosition(function (position) {
    console.log("position watched " + position.coords.latitude + ", " + position.coords.longitude);
    document.getElementById('currentLat').innerHTML = position.coords.latitude;
    document.getElementById('currentLon').innerHTML = position.coords.longitude;
    initMap();
});


function initMap() {
    

    // Create a map object and specify the DOM element
    // for display.
    var map = new google.maps.Map(document.getElementById('map'), {
      center: myLatLng,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      disableDefaultUI: true,
      streetViewControl: true,
      zoom: 19,
     
    });
    var image = {
        url: 'car1.png',
        // This marker is 20 pixels wide by 32 pixels high.
      };
    // Create a marker and set its position.
    var marker = new google.maps.Marker({
      map: map,
      position: myLatLng,
      streetViewControl: true,
      title: 'Car position'
    });
  }</script>

</body>
</html> 
